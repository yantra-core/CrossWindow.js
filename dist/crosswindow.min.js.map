{"version":3,"sourceRoot":"../","sources":["./dist/crosswindow.js"],"sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.CW = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"CrossWindow\", {\n  enumerable: true,\n  get: function get() {\n    return _CrossWindow[\"default\"];\n  }\n});\nexports.createCrossWindow = createCrossWindow;\nvar _CrossWindow = _interopRequireDefault(require(\"./lib/CrossWindow.js\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction createCrossWindow() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return new _CrossWindow[\"default\"](options);\n}\n\n},{\"./lib/CrossWindow.js\":3}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _EventReceiver = _interopRequireDefault(require(\"./EventReceiver.js\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// handles keyboard and mouse events\nvar CommunicationManager = exports[\"default\"] = /*#__PURE__*/function () {\n  function CommunicationManager(channel, cw, notUsed, metadataManager) {\n    _classCallCheck(this, CommunicationManager);\n    this.channel = channel;\n    this.windowId = cw.windowId;\n    this.cw = cw;\n    this.metadataManager = metadataManager;\n    this.eventReceiver = new _EventReceiver[\"default\"](cw);\n    this.setupListeners();\n  }\n  _createClass(CommunicationManager, [{\n    key: \"setupListeners\",\n    value: function setupListeners() {\n      var _this = this;\n      this.channel.onmessage = function (event) {\n        var data = event.data;\n        switch (data.action) {\n          case 'ping':\n            if (data.sourceWindowId !== _this.windowId) _this.channel.postMessage({\n              action: 'pong',\n              sourceWindowId: _this.windowId\n            });\n            break;\n          case 'pong':\n            if (data.sourceWindowId !== _this.windowId) _this.metadataManager.markWindowAsActive(data.sourceWindowId);\n            break;\n          case 'message':\n            if (data.targetWindowId === 'any') _this.cw.emit('message', data);\n            if (data.targetWindowId === _this.windowId) _this.cw.emit('message', data);\n            break;\n          case 'intersecting':\n            if (data.sourceWindowId !== _this.windowId) _this.cw.emit('intersecting', data);\n            break;\n          case 'keydown':\n          case 'keyup':\n            // do not repeat own inputs\n            if (data.sourceWindowId === _this.windowId) {\n              return;\n            }\n            _this.eventReceiver.handleKeyboardEvent(data);\n            _this.cw.emit('keyEvent', data);\n            break;\n          case 'mouseEvent':\n            _this.eventReceiver.handleMouseEvent(data);\n            _this.cw.emit('mouseEvent', data);\n            break;\n        }\n      };\n    }\n  }, {\n    key: \"sendMessage\",\n    value: function sendMessage(message) {\n      if (message.targetWindowId === this.windowId) {\n        this.cw.emit('message', {\n          sourceWindowId: this.windowId,\n          payload: message\n        });\n        return;\n      }\n\n      // sanitize message to remove functions and possible circular references\n      message = JSON.parse(JSON.stringify(message));\n      message.sourceWindowId = this.windowId;\n      this.channel.postMessage(message);\n    }\n  }]);\n  return CommunicationManager;\n}();\n\n},{\"./EventReceiver.js\":4}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _getBestWindow = _interopRequireDefault(require(\"./getBestWindow.js\"));\nvar _open = _interopRequireDefault(require(\"./open.js\"));\nvar _CommunicationManager = _interopRequireDefault(require(\"./CommunicationManager.js\"));\nvar _MetadataManager = _interopRequireDefault(require(\"./MetadataManager.js\"));\nvar _IntersectionDetector = _interopRequireDefault(require(\"./IntersectionDetector.js\"));\nvar _KeyboardEventBroadcaster = _interopRequireDefault(require(\"./KeyboardEventBroadcaster.js\"));\nvar _MouseEventBroadcaster = _interopRequireDefault(require(\"./MouseEventBroadcaster.js\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); } // CrossWindow.js - Marak Squires 2024\n// A class to manage communication and entity movement between multiple windows\n// Supports opening new windows, sending messages, and teleporting entities between windows\n// Also supports detecting and handling window intersections\nvar CrossWindow = exports[\"default\"] = /*#__PURE__*/function () {\n  function CrossWindow(_window) {\n    var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, CrossWindow);\n    // TODO: ensure that no global window scope is used in code, always refer to this.window\n    this.window = _window;\n    this.config = {};\n    this.config.metadataKey = config.metadataKey || 'windowMetadata';\n\n    // Defaults true for broadcasting input events\n    this.config.broadcastKeyboardEvents = true;\n    this.config.broadcastMouseEvents = true;\n\n    // Override defaults with user config\n    if (typeof config.broadcastKeyboardEvents === 'boolean') {\n      this.config.broadcastKeyboardEvents = config.broadcastKeyboardEvents;\n    }\n    if (typeof config.broadcastMouseEvents === 'boolean') {\n      this.config.broadcastMouseEvents = config.broadcastMouseEvents;\n    }\n    this.events = {};\n    this.windowId = \"\".concat(Date.now(), \"-\").concat(Math.random().toString(36).substr(2, 9));\n    this.metadataManager = new _MetadataManager[\"default\"](this);\n    this.communicationManager = new _CommunicationManager[\"default\"](new BroadcastChannel('crosswindow_channel'), this, null, this.metadataManager);\n    this.intersectionDetector = new _IntersectionDetector[\"default\"](this.metadataManager, this.windowId);\n    if (this.config.broadcastKeyboardEvents) {\n      this.keyboardEventBroadcaster = new _KeyboardEventBroadcaster[\"default\"](this);\n    }\n    if (this.config.broadcastMouseEvents) {\n      this.mouseEventBroadcaster = new _MouseEventBroadcaster[\"default\"](this);\n    }\n    this.open = _open[\"default\"].bind(this);\n    this.getBestWindow = _getBestWindow[\"default\"].bind(this);\n    this.getWindows = this.metadataManager.getWindows.bind(this.metadataManager);\n    this.getWindowById = this.metadataManager.getWindowById.bind(this.metadataManager);\n    this.getCurrentWindows = this.metadataManager.getCurrentWindows.bind(this.metadataManager);\n    this.getWindowMetadata = this.metadataManager.getWindowMetadata.bind(this);\n    this.postMessage = this.communicationManager.sendMessage.bind(this.communicationManager);\n    this.registerWindow();\n    this.metadataManager.startHeartbeat();\n    this.metadataManager.startWindowEventPolling();\n  }\n  _createClass(CrossWindow, [{\n    key: \"on\",\n    value: function on(eventName, callback) {\n      if (!this.events[eventName]) this.events[eventName] = [];\n      this.events[eventName].push(callback);\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(eventName, data) {\n      var callbacks = this.events[eventName];\n      if (callbacks) callbacks.forEach(function (callback) {\n        return callback(data);\n      });\n    }\n  }, {\n    key: \"registerWindow\",\n    value: function registerWindow() {\n      this.metadataManager.updateWindowMetadata();\n      this.pingOtherWindows();\n    }\n  }, {\n    key: \"pingOtherWindows\",\n    value: function pingOtherWindows() {\n      var _this = this;\n      var channel = new BroadcastChannel('crosswindow_channel');\n      channel.postMessage({\n        action: 'ping',\n        sourceWindowId: this.windowId\n      });\n      setTimeout(function () {\n        return _this.metadataManager.removeInactiveWindows();\n      }, 100);\n    }\n  }, {\n    key: \"deregisterWindow\",\n    value: function deregisterWindow() {\n      this.metadataManager.deregisterWindow();\n    }\n  }]);\n  return CrossWindow;\n}();\n\n},{\"./CommunicationManager.js\":2,\"./IntersectionDetector.js\":5,\"./KeyboardEventBroadcaster.js\":6,\"./MetadataManager.js\":7,\"./MouseEventBroadcaster.js\":8,\"./getBestWindow.js\":9,\"./open.js\":10}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar EventReceiver = exports[\"default\"] = /*#__PURE__*/function () {\n  function EventReceiver(crosswindow) {\n    _classCallCheck(this, EventReceiver);\n    this.crosswindow = crosswindow;\n  }\n  _createClass(EventReceiver, [{\n    key: \"handleKeyboardEvent\",\n    value: function handleKeyboardEvent(data) {\n      if (data.sourceWindowId === this.crosswindow.windowId) {\n        // Don't process own inputs\n        return;\n      }\n\n      // Dispatch the keyboard event locally\n      var event = new KeyboardEvent(data.action, {\n        code: data.message.code,\n        repeat: data.message.repeat,\n        shiftKey: data.message.shiftKey,\n        ctrlKey: data.message.ctrlKey,\n        altKey: data.message.altKey,\n        metaKey: data.message.metaKey,\n        bubbles: false\n      });\n      document.dispatchEvent(event);\n    }\n  }, {\n    key: \"handleMouseEvent\",\n    value: function handleMouseEvent(data) {\n      if (data.sourceWindowId === this.crosswindow.windowId) {\n        // Don't process own inputs\n        return;\n      }\n\n      // Dispatch the mouse event locally\n      var event = new MouseEvent(data.message.type, {\n        clientX: data.message.x,\n        clientY: data.message.y,\n        button: data.message.button,\n        ctrlKey: data.message.ctrlKey,\n        shiftKey: data.message.shiftKey,\n        altKey: data.message.altKey,\n        metaKey: data.message.metaKey,\n        bubbles: false\n      });\n      document.dispatchEvent(event);\n    }\n  }]);\n  return EventReceiver;\n}();\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// The intersection detector class is responsible for detecting intersections between the current window and other windows.\n// This can be used to create \"x-ray\" style effects, or shared entities between windows.\nvar IntersectionDetector = exports[\"default\"] = /*#__PURE__*/function () {\n  function IntersectionDetector(metadataManager, windowId) {\n    _classCallCheck(this, IntersectionDetector);\n    this.metadataManager = metadataManager;\n    this.windowId = windowId;\n    this.prevMetadata = null;\n    this.startMetadataPolling();\n  }\n  _createClass(IntersectionDetector, [{\n    key: \"startMetadataPolling\",\n    value: function startMetadataPolling() {\n      var _this = this;\n      this.prevMetadata = this.metadataManager.getWindowMetadata();\n      setInterval(function () {\n        var currentMetadata = _this.metadataManager.getWindowMetadata();\n        if (_this.metadataManager.hasMetadataChanged(_this.prevMetadata, currentMetadata)) {\n          _this.metadataManager.updateWindowMetadata(currentMetadata);\n          _this.checkForIntersections(currentMetadata);\n        }\n      }, 100);\n    }\n  }, {\n    key: \"checkForIntersections\",\n    value: function checkForIntersections(currentMetadata) {\n      var _this2 = this;\n      var allWindowsMetadata = JSON.parse(localStorage.getItem(this.metadataManager.metadataKey)) || {};\n      Object.entries(allWindowsMetadata).forEach(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n          windowId = _ref2[0],\n          metadata = _ref2[1];\n        if (windowId !== _this2.windowId && _this2.isOverlapping(currentMetadata, metadata)) {\n          _this2.emitIntersectionEvent(windowId, _this2.calculateIntersection(currentMetadata, metadata));\n        }\n      });\n    }\n  }, {\n    key: \"isOverlapping\",\n    value: function isOverlapping(metadata1, metadata2) {\n      return !(metadata2.position.x >= metadata1.position.x + metadata1.size.width || metadata2.position.x + metadata2.size.width <= metadata1.position.x || metadata2.position.y >= metadata1.position.y + metadata1.size.height || metadata2.position.y + metadata2.size.height <= metadata1.position.y);\n    }\n  }, {\n    key: \"calculateIntersection\",\n    value: function calculateIntersection(metadata1, metadata2) {\n      var x1 = Math.max(metadata1.position.x, metadata2.position.x);\n      var y1 = Math.max(metadata1.position.y, metadata2.position.y);\n      var x2 = Math.min(metadata1.position.x + metadata1.size.width, metadata2.position.x + metadata2.size.width);\n      var y2 = Math.min(metadata1.position.y + metadata1.size.height, metadata2.position.y + metadata2.size.height);\n      return {\n        position: {\n          x: x1,\n          y: y1\n        },\n        size: {\n          width: x2 - x1,\n          height: y2 - y1\n        }\n      };\n    }\n  }, {\n    key: \"emitIntersectionEvent\",\n    value: function emitIntersectionEvent(targetWindowId, intersectionArea) {\n      var channel = new BroadcastChannel('crosswindow_channel');\n      channel.postMessage({\n        action: 'intersecting',\n        sourceWindowId: this.windowId,\n        targetWindowId: targetWindowId,\n        intersectionArea: intersectionArea\n      });\n    }\n  }]);\n  return IntersectionDetector;\n}();\n\n},{}],6:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar KeyboardEventBroadcaster = exports[\"default\"] = /*#__PURE__*/function () {\n  function KeyboardEventBroadcaster(crosswindow) {\n    _classCallCheck(this, KeyboardEventBroadcaster);\n    this.cw = crosswindow;\n    this.initEventListeners();\n  }\n  _createClass(KeyboardEventBroadcaster, [{\n    key: \"initEventListeners\",\n    value: function initEventListeners() {\n      window.document.addEventListener('keydown', this.handleKeyboardEvent.bind(this));\n      window.document.addEventListener('keyup', this.handleKeyboardEvent.bind(this));\n    }\n  }, {\n    key: \"handleKeyboardEvent\",\n    value: function handleKeyboardEvent(event) {\n      // Return early if event should not be propagated\n      if (event.bubbles === false) {\n        return;\n      }\n\n      // Serialize the keyboard event with relevant properties\n      var keyboardMessage = {\n        key: event.key,\n        code: event.code,\n        keyCode: event.keyCode,\n        repeat: event.repeat,\n        type: event.type,\n        shiftKey: event.shiftKey,\n        ctrlKey: event.ctrlKey,\n        altKey: event.altKey,\n        metaKey: event.metaKey,\n        bubbles: false\n      };\n      // console.log('sending event keyevent', event.type)\n      // Broadcast the keyboard event to all crosswindow targets\n\n      this.cw.communicationManager.sendMessage({\n        targetWindowId: 'any',\n        action: event.type,\n        // 'keydown' or 'keyup'\n        message: keyboardMessage\n      });\n\n      /*\n      this.crosswindow.postMessage({\n        targetWindowId: 'any',\n        action: event.type, // 'keydown' or 'keyup'\n        message: keyboardMessage\n      });\n      */\n    }\n  }]);\n  return KeyboardEventBroadcaster;\n}();\n\n},{}],7:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar MetadataManager = exports[\"default\"] = /*#__PURE__*/function () {\n  function MetadataManager(cw) {\n    _classCallCheck(this, MetadataManager);\n    this.cw = cw;\n    this.config = cw.config;\n    this.windowId = cw.windowId;\n    this.emit = cw.emit.bind(cw);\n    this.currentWindows = {};\n  }\n  _createClass(MetadataManager, [{\n    key: \"startHeartbeat\",\n    value: function startHeartbeat() {\n      var _this = this;\n      setInterval(function () {\n        _this.updateWindowMetadata(); // Update current window's metadata\n        _this.removeInactiveWindows(660); // milliseconds\n      }, 200); // Update every 200ms\n    }\n  }, {\n    key: \"getCurrentWindows\",\n    value: function getCurrentWindows() {\n      var allWindowsMetadata = JSON.parse(localStorage.getItem(this.config.metadataKey)) || {};\n      return allWindowsMetadata;\n    }\n\n    // Method to abstract the window object creation logic\n  }, {\n    key: \"createWindowObject\",\n    value: function createWindowObject(key, metadata) {\n      var _this2 = this;\n      var _window = {};\n\n      // Define the postMessage function with scoped data\n      _window.postMessage = function (data) {\n        // Ensure the data object includes the necessary properties\n        data.targetWindowId = key; // Use the key as the window ID\n        data.sourceWindowId = _this2.cw.windowId;\n        // console.log('sending meta', data);\n        data.action = 'message';\n\n        // Send the message through the communication manager\n        _this2.cw.communicationManager.sendMessage(data);\n      };\n\n      // Assign the window ID and metadata\n      _window.windowId = key;\n      _window.metadata = metadata;\n      return _window;\n    }\n  }, {\n    key: \"getWindows\",\n    value: function getWindows() {\n      var _this3 = this;\n      var windowsMetadata = JSON.parse(localStorage.getItem(this.config.metadataKey)) || {};\n      // console.log('windowsMetadata', windowsMetadata);\n\n      var windows = Object.keys(windowsMetadata).reduce(function (acc, key) {\n        var metadata = windowsMetadata[key];\n        var _window = _this3.createWindowObject(key, metadata);\n\n        // Accumulate the _window object into the acc object, keyed by windowId\n        acc[_window.windowId] = _window;\n        return acc;\n      }, {}); // Initialize acc as an empty object\n\n      // console.log('windows object', windows);\n      return windows;\n    }\n  }, {\n    key: \"getWindowById\",\n    value: function getWindowById(windowId) {\n      var windowsMetadata = JSON.parse(localStorage.getItem(this.config.metadataKey)) || {};\n      var metadata = windowsMetadata[windowId];\n      if (!metadata) {\n        console.log(\"Window with ID \".concat(windowId, \" not found.\"));\n        return null;\n      }\n      return this.createWindowObject(windowId, metadata);\n    }\n  }, {\n    key: \"hasMetadataChanged\",\n    value: function hasMetadataChanged(prevMetadata, currentMetadata) {\n      return prevMetadata.position.x !== currentMetadata.position.x || prevMetadata.position.y !== currentMetadata.position.y || prevMetadata.size.width !== currentMetadata.size.width || prevMetadata.size.height !== currentMetadata.size.height;\n    }\n  }, {\n    key: \"getWindowMetadata\",\n    value: function getWindowMetadata() {\n      return {\n        position: {\n          x: window.screenX,\n          y: window.screenY\n        },\n        size: {\n          width: window.outerWidth,\n          height: window.outerHeight\n        }\n      };\n    }\n  }, {\n    key: \"updateWindowMetadata\",\n    value: function updateWindowMetadata() {\n      var metadata = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.getWindowMetadata();\n      var allWindowsMetadata = JSON.parse(localStorage.getItem(this.config.metadataKey)) || {};\n      var now = Date.now();\n\n      // Check if the current window's metadata exists or if the incoming update is more recent\n      if (!allWindowsMetadata.hasOwnProperty(this.windowId) || now > allWindowsMetadata[this.windowId].lastUpdate) {\n        // Update the metadata with the current timestamp and save it\n        allWindowsMetadata[this.windowId] = _objectSpread(_objectSpread({}, metadata), {}, {\n          lastActive: now,\n          lastUpdate: now\n        });\n        // console.log('Updating metadata for window:', this.windowId, allWindowsMetadata[this.windowId]);\n        localStorage.setItem(this.config.metadataKey, JSON.stringify(allWindowsMetadata));\n      } else {\n        // console.log(`Skipped update for window ID ${this.windowId} due to older timestamp.`);\n      }\n    }\n  }, {\n    key: \"startWindowEventPolling\",\n    value: function startWindowEventPolling() {\n      var _this4 = this;\n      this.prevMetadata = this.getWindows(); // Initial setup for comparison\n\n      setInterval(function () {\n        var allWindows = _this4.getWindows(); // Fetch current state of all windows\n\n        // Check for closed windows\n        Object.keys(_this4.prevMetadata).forEach(function (windowId) {\n          if (windowId !== _this4.windowId && !allWindows.hasOwnProperty(windowId)) {\n            _this4.emit('windowClosed', {\n              windowId: windowId,\n              metadata: _this4.prevMetadata[windowId]\n            });\n          }\n        });\n\n        // Check for new or changed windows\n        Object.keys(allWindows).forEach(function (windowId) {\n          var currentWindow = allWindows[windowId];\n          var prevWindow = _this4.prevMetadata[windowId];\n          if (!prevWindow) {\n            _this4.emit('windowOpened', currentWindow); // Emit event for new window\n          } else if (_this4.hasMetadataChanged(prevWindow.metadata, currentWindow.metadata)) {\n            _this4.emit('windowChanged', currentWindow); // Emit event for changed window\n          }\n        });\n        _this4.prevMetadata = allWindows; // Update for next iteration\n      }, 200); // Frequency of polling\n    }\n  }, {\n    key: \"removeInactiveWindows\",\n    value: function removeInactiveWindows() {\n      var _this5 = this;\n      var timeout = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1000;\n      var currentWindowsInLocalStorage = JSON.parse(localStorage.getItem(this.config.metadataKey)) || {};\n      var currentTime = Date.now();\n      //console.log('removeInactiveWindows', allWindowsMetadata, currentTime, timeout)\n      Object.entries(currentWindowsInLocalStorage).forEach(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n          windowId = _ref2[0],\n          metadata = _ref2[1];\n        if (currentTime - metadata.lastActive > timeout) {\n          // console.log('removeInactiveWindows', windowId, metadata, currentTime, timeout)\n          delete currentWindowsInLocalStorage[windowId];\n          _this5.currentWindows[windowId] = null;\n        }\n      });\n      localStorage.setItem(this.config.metadataKey, JSON.stringify(currentWindowsInLocalStorage));\n    }\n  }, {\n    key: \"markWindowAsActive\",\n    value: function markWindowAsActive(windowId) {\n      var allWindowsMetadata = JSON.parse(localStorage.getItem(this.config.metadataKey)) || {};\n      if (allWindowsMetadata[windowId]) {\n        allWindowsMetadata[windowId].lastActive = Date.now();\n        localStorage.setItem(this.config.metadataKey, JSON.stringify(allWindowsMetadata));\n      }\n    }\n  }, {\n    key: \"deregisterWindow\",\n    value: function deregisterWindow() {\n      var allWindowsMetadata = JSON.parse(localStorage.getItem(this.config.metadataKey)) || {};\n      delete allWindowsMetadata[this.windowId];\n      localStorage.setItem(this.config.metadataKey, JSON.stringify(allWindowsMetadata));\n    }\n  }]);\n  return MetadataManager;\n}();\n\n},{}],8:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar MouseEventBroadcaster = exports[\"default\"] = /*#__PURE__*/function () {\n  function MouseEventBroadcaster(crosswindow) {\n    _classCallCheck(this, MouseEventBroadcaster);\n    this.cw = crosswindow;\n    this.initEventListeners();\n  }\n  _createClass(MouseEventBroadcaster, [{\n    key: \"initEventListeners\",\n    value: function initEventListeners() {\n      var _this = this;\n      // List of mouse events you want to broadcast\n      var mouseEvents = ['click', 'mousedown', 'mouseup', 'mousemove'];\n      mouseEvents.forEach(function (eventType) {\n        window.document.addEventListener(eventType, _this.handleMouseEvent.bind(_this));\n      });\n    }\n  }, {\n    key: \"handleMouseEvent\",\n    value: function handleMouseEvent(event) {\n      // Return early if event should not be propagated\n      if (event.bubbles === false) {\n        return;\n      }\n      if (!this.shouldBroadcastEvent(event)) {\n        return;\n      }\n\n      // Serialize the mouse event with relevant properties\n      var mouseMessage = {\n        type: event.type,\n        x: event.clientX,\n        y: event.clientY,\n        button: event.button,\n        ctrlKey: event.ctrlKey,\n        shiftKey: event.shiftKey,\n        altKey: event.altKey,\n        metaKey: event.metaKey\n      };\n\n      // Broadcast the mouse event to all crosswindow targets\n      this.cw.communicationManager.sendMessage({\n        targetWindowId: 'any',\n        action: 'mouseEvent',\n        message: mouseMessage\n      });\n    }\n  }, {\n    key: \"shouldBroadcastEvent\",\n    value: function shouldBroadcastEvent(event) {\n      // Implement any logic to determine whether the event should be broadcasted\n      // For example, you might want to limit mousemove events to avoid flooding\n      return true; // For simplicity, broadcasting all events\n    }\n  }]);\n  return MouseEventBroadcaster;\n}();\n\n},{}],9:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = getBestWindow;\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n// TODO: refactor this file a bit and split into multiple files with classes\n\n// Remark: We'll need more advanced logic for window layout and positioning ( cascadee / tile / grid / etc )\nfunction calculateEntryPosition(direction, position, bestWindowId) {\n  var zoomScale = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n  // get the latest metadata about bestWindowId from localStorage\n  var allWindowsMetadata = JSON.parse(localStorage.getItem('windowMetadata')) || {};\n  var bestWindowMetadata = allWindowsMetadata[bestWindowId];\n  if (!bestWindowMetadata) {\n    console.error('calculateEntryPosition: bestWindowMetadata not found for windowId', bestWindowId);\n    return;\n  }\n  var bestWindowSize = bestWindowMetadata.size;\n  var bestWindowPosition = bestWindowMetadata.position;\n  // we need to determine if the calculated position is outside the bounds of the bestWindow\n  // if it is, we need to clamp the value to the edge of the window\n  // we are working with world coordinates at zoom scale value 1\n  // so we can calculate the world coordinates of the window edges by using\n  // the window position and size\n  var gameWidth = bestWindowSize.width / 2;\n  var gameHeight = bestWindowSize.height / 2;\n  gameWidth = gameWidth * zoomScale;\n  gameHeight = gameHeight * zoomScale;\n\n  //console.log('bestWindowPosition', bestWindowPosition)\n  //console.log('bestWindowSize', bestWindowSize)\n\n  // Adjust this buffer size as needed\n  var buffer = 40; // any small values should work, without buffer the entity may get stuck in teleportation loop\n  // console.log('calculateEntryPosition', direction, position)\n\n  switch (direction) {\n    case 'E':\n    case 'NE':\n    case 'SE':\n      position.x = -gameWidth / 2 + buffer;\n      break;\n    case 'W':\n    case 'SW':\n    case 'NW':\n      position.x = gameWidth / 2 - buffer;\n      break;\n    case 'N':\n      position.y = gameHeight / 2 - buffer;\n      break;\n    case 'S':\n      position.y = -gameHeight / 2 + buffer;\n      break;\n  }\n  return position;\n}\nfunction calculateDistance(point1, point2) {\n  var dx = point1.x - point2.x;\n  var dy = point1.y - point2.y;\n  return Math.sqrt(dx * dx + dy * dy);\n}\nfunction determineCardinalDirection(entityData) {\n  if (entityData.direction) {\n    return entityData.direction;\n  }\n  var screenPosition = entityData.screenPosition;\n\n  // Window's screen position and size to determine the edges\n  var windowLeft = window.screenX;\n  var windowRight = window.screenX + window.outerWidth;\n  var windowTop = window.screenY;\n  var windowBottom = window.screenY + window.outerHeight;\n\n  // Differences to the window edges\n  var diffToLeft = screenPosition.x - windowLeft;\n  var diffToRight = windowRight - screenPosition.x;\n  var diffToTop = screenPosition.y - windowTop;\n  var diffToBottom = windowBottom - screenPosition.y;\n\n  // Total differences for horizontal and vertical directions\n  //const totalHorizontalDiff = diffToLeft + diffToRight;\n  //const totalVerticalDiff = diffToTop + diffToBottom;\n\n  // Compare all the diffs and see which is the smallest\n  // and return the direction\n  if (diffToLeft < diffToRight && diffToLeft < diffToTop && diffToLeft < diffToBottom) {\n    return 'W';\n  } else if (diffToRight < diffToLeft && diffToRight < diffToTop && diffToRight < diffToBottom) {\n    return 'E';\n  } else if (diffToTop < diffToLeft && diffToTop < diffToRight && diffToTop < diffToBottom) {\n    return 'N';\n  } else if (diffToBottom < diffToLeft && diffToBottom < diffToRight && diffToBottom < diffToTop) {\n    return 'S';\n  }\n}\nfunction getBestWindow(entityData) {\n  var _this = this;\n  var zoomScale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  // TODO: entityData.position? we need an API semantic here for .position and .screenPosition\n  //console.log('calling getBestWindow.determineCardinalDirection', entityData)\n  var direction = determineCardinalDirection(entityData);\n  //console.log('got back direction', direction)\n  var allWindowsMetadata = JSON.parse(localStorage.getItem(this.config.metadataKey)) || {};\n  var currentWindowPosition = getCurrentWindowPosition();\n  var currentWindowSize = getCurrentWindowSize();\n  var bestWindowId = null;\n  var minEdgeDistance = Infinity;\n  var fallbackWindowId = null;\n  var minFallbackDistance = Infinity;\n  if (Object.keys(allWindowsMetadata).length === 0) {\n    bestWindowId = this.windowId;\n  }\n\n  // console.log('allWindowsMetadata', allWindowsMetadata, 'currentWindowPosition', currentWindowPosition, 'currentWindowSize', currentWindowSize, 'direction', direction, 'entityData', entityData, 'zoomScale', zoomScale)\n  Object.entries(allWindowsMetadata).forEach(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      windowId = _ref2[0],\n      metadata = _ref2[1];\n    if (windowId !== _this.windowId) {\n      var edgeDistance = calculateEdgeDistance(direction, metadata.position, metadata.size, currentWindowPosition, currentWindowSize);\n      if (direction === 'E' && metadata.position.x > currentWindowPosition.x) {\n        // Consider windows to the right for East direction\n        if (edgeDistance < minEdgeDistance) {\n          minEdgeDistance = edgeDistance;\n          bestWindowId = windowId;\n        }\n      } else if (direction === 'W' && metadata.position.x < currentWindowPosition.x) {\n        // Consider windows to the left for West direction\n        if (edgeDistance < minEdgeDistance) {\n          minEdgeDistance = edgeDistance;\n          bestWindowId = windowId;\n        }\n      } // Add similar checks for 'N' and 'S' directions if needed\n      else if (direction === 'N' && metadata.position.y < currentWindowPosition.y) {\n        // Consider windows to the left for West direction\n        if (edgeDistance < minEdgeDistance) {\n          minEdgeDistance = edgeDistance;\n          bestWindowId = windowId;\n        }\n      } else if (direction === 'S' && metadata.position.y > currentWindowPosition.y) {\n        // Consider windows to the left for West direction\n        if (edgeDistance < minEdgeDistance) {\n          minEdgeDistance = edgeDistance;\n          bestWindowId = windowId;\n        }\n      }\n      // Fallback for when no window is found in the preferred direction\n      if (edgeDistance < minFallbackDistance) {\n        minFallbackDistance = edgeDistance;\n        fallbackWindowId = windowId;\n      }\n    }\n  });\n\n  // If no suitable window is found in the preferred direction, use the fallback\n  if (!bestWindowId && fallbackWindowId) {\n    bestWindowId = fallbackWindowId;\n  }\n  if (!bestWindowId) {\n    bestWindowId = this.windowId;\n  }\n\n  // console.log('bestWindowId', bestWindowId, 'direction', direction, 'entityData', entityData, 'zoomScale', zoomScale)\n\n  // TODO: we can refactor this code to take up less space, incorporate with above loop\n  if (bestWindowId === this.windowId && Object.keys(allWindowsMetadata).length > 1) {\n    // If the best window is the current window and there are other windows available,\n    // pick the first other window as the best window. This is a basic fallback.\n\n    // Remove the current window from consideration\n    delete allWindowsMetadata[this.windowId];\n\n    // Reset minEdgeDistance for the new comparison\n    minEdgeDistance = Infinity;\n\n    // Iterate through the remaining windows to find the closest one\n    Object.entries(allWindowsMetadata).forEach(function (_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n        windowId = _ref4[0],\n        metadata = _ref4[1];\n      var edgeDistance = calculateEdgeDistance(direction, metadata.position, metadata.size, currentWindowPosition, currentWindowSize);\n\n      // Update bestWindowId if a closer window is found\n      if (edgeDistance < minEdgeDistance) {\n        minEdgeDistance = edgeDistance;\n        bestWindowId = windowId;\n      }\n\n      // console.log('will not prefer self using other', bestWindowId, 'direction', direction, 'entityData', entityData, 'zoomScale', zoomScale)\n    });\n  }\n  return prepareBestWindowResponse(this, bestWindowId, direction, entityData, zoomScale);\n}\n\n// Helper function to get the current window's position\n// Implement this based on how you track window positions in your application\nfunction getCurrentWindowPosition() {\n  // Example return value\n  return {\n    x: window.screenX,\n    y: window.screenY\n  };\n}\n\n// Helper function to get the current window's size\nfunction getCurrentWindowSize() {\n  // Example return value\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight\n  };\n}\nfunction calculateEdgeDistance(direction, targetWindowPosition, targetWindowSize, currentWindowPosition, currentWindowSize) {\n  var edgeDistance;\n  // console.log('calculateEdgeDistance', direction, targetWindowPosition, targetWindowSize, currentWindowPosition, currentWindowSize)\n  switch (direction) {\n    case 'E':\n      // Entity is moving East, so we calculate the distance from the current window's right edge to the target window's left edge\n      edgeDistance = targetWindowPosition.x - (currentWindowPosition.x + currentWindowSize.width);\n      break;\n    case 'W':\n      // Entity is moving West, so we calculate the distance from the current window's left edge to the target window's right edge\n      edgeDistance = currentWindowPosition.x - (targetWindowPosition.x + targetWindowSize.width);\n      break;\n    case 'N':\n      // Entity is moving North, so we calculate the distance from the current window's top edge to the target window's bottom edge\n      edgeDistance = currentWindowPosition.y - (targetWindowPosition.y + targetWindowSize.height);\n      break;\n    case 'S':\n      // Entity is moving South, so we calculate the distance from the current window's bottom edge to the target window's top edge\n      edgeDistance = targetWindowPosition.y - (currentWindowPosition.y + currentWindowSize.height);\n      break;\n    // Handle diagonal directions if needed by combining logic for horizontal and vertical edges\n    // e.g., for NE, use the logic from N and E to find the shortest edge distance\n    default:\n      edgeDistance = Infinity; // Default case to handle unexpected directions\n      break;\n  }\n\n  // console.log('calcuate distance', edgeDistance, direction, targetWindowPosition, targetWindowSize, currentWindowPosition, currentWindowSize)\n\n  return edgeDistance;\n}\nfunction prepareBestWindowResponse(cw, bestWindowId, direction, entityData) {\n  var zoomScale = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n  return {\n    windowId: bestWindowId,\n    direction: direction,\n    entryPosition: calculateEntryPosition(direction, entityData.position, bestWindowId, zoomScale),\n    postMessage: function postMessage(data) {\n      // console.log('previous position in window', data.position)\n      if (typeof data.position === 'undefined') {\n        data.position = {\n          x: 0,\n          y: 0,\n          z: 0\n        }; // default position if none provided\n      }\n      var newEntryPosition = calculateEntryPosition(direction, data.position, bestWindowId, zoomScale);\n      //console.log('newly calculated position in window', newEntryPosition)\n      data.position = newEntryPosition;\n      data.direction = direction;\n      data.targetWindowId = bestWindowId;\n      cw.communicationManager.sendMessage(data);\n    }\n  };\n}\n\n},{}],10:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = open;\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction open(url) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var adjustCurrentWindow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  if (!url) {\n    console.error('URL is required to open a new window.');\n    return;\n  }\n  var availableScreenWidth = screen.availWidth - window.screenX;\n  var availableScreenHeight = screen.availHeight - window.screenY;\n  var defaultFeatures = {\n    width: Math.min(window.outerWidth, availableScreenWidth - 100),\n    height: Math.min(window.outerHeight, availableScreenHeight - 100),\n    menubar: 'no',\n    toolbar: 'no',\n    location: 'no',\n    status: 'no',\n    scrollbars: 'yes',\n    resizable: 'yes',\n    title: new Date().toISOString(),\n    left: window.screenX + window.outerWidth + 100,\n    top: window.screenY\n  };\n  var features = _objectSpread(_objectSpread({}, defaultFeatures), options);\n  if (adjustCurrentWindow && (features.left + features.width > screen.availWidth || features.top + features.height > screen.availHeight)) {\n    var halfWidth = Math.floor(window.outerWidth / 2);\n    var halfHeight = Math.floor(window.outerHeight / 2);\n\n    // window.resizeTo(halfWidth, halfHeight);\n\n    // Determine an appropriate offset to maintain proximity without overlap\n    var offsetX = window.screenX + halfWidth + features.width > screen.availWidth ? screen.availWidth - features.width - halfWidth : window.screenX;\n    var offsetY = window.screenY + halfHeight + features.height > screen.availHeight ? screen.availHeight - features.height - halfHeight : window.screenY;\n\n    // window.moveTo(offsetX, offsetY);\n\n    features.width = halfWidth;\n    features.height = halfHeight;\n    features.left = offsetX + halfWidth; // Place new window to the right of the resized current window\n    // features.top = offsetY; // Align new window's top with the current window's top\n  }\n  var featuresStr = Object.entries(features).map(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      key = _ref2[0],\n      value = _ref2[1];\n    return \"\".concat(key, \"=\").concat(value);\n  }).join(',');\n  var newWindow = window.open(url, features.title, featuresStr);\n  if (newWindow) {\n    return newWindow;\n  } else {\n    console.error('Failed to open a new window. Please check browser popup settings.');\n  }\n}\n\n},{}]},{},[1])(1)\n});\n"],"names":["f","exports","module","define","amd","window","global","self","this","CW","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","1","Object","defineProperty","value","enumerable","get","_CrossWindow","createCrossWindow","options","arguments","undefined","obj","__esModule","default","./lib/CrossWindow.js","2","_EventReceiver","_typeof","Symbol","iterator","constructor","prototype","_defineProperties","target","props","descriptor","configurable","writable","toPrimitive","String","Number","TypeError","key","CommunicationManager","channel","cw","notUsed","metadataManager","windowId","eventReceiver","setupListeners","Constructor","protoProps","staticProps","_this","onmessage","event","data","action","sourceWindowId","postMessage","markWindowAsActive","targetWindowId","emit","handleKeyboardEvent","handleMouseEvent","message","payload","JSON","parse","stringify","./EventReceiver.js","3","_getBestWindow","_interopRequireDefault","_open","_CommunicationManager","_MetadataManager","_IntersectionDetector","_KeyboardEventBroadcaster","_MouseEventBroadcaster","CrossWindow","_window","config","instance","metadataKey","broadcastKeyboardEvents","broadcastMouseEvents","events","concat","Date","now","Math","random","toString","substr","communicationManager","BroadcastChannel","intersectionDetector","keyboardEventBroadcaster","mouseEventBroadcaster","open","bind","getBestWindow","getWindows","getWindowById","getCurrentWindows","getWindowMetadata","sendMessage","registerWindow","startHeartbeat","startWindowEventPolling","eventName","callback","push","callbacks","forEach","updateWindowMetadata","pingOtherWindows","setTimeout","removeInactiveWindows","deregisterWindow","./CommunicationManager.js","./IntersectionDetector.js","./KeyboardEventBroadcaster.js","./MetadataManager.js","./MouseEventBroadcaster.js","./getBestWindow.js","./open.js","4","EventReceiver","crosswindow","KeyboardEvent","repeat","shiftKey","ctrlKey","altKey","metaKey","bubbles","document","dispatchEvent","MouseEvent","type","clientX","x","clientY","y","button","5","_slicedToArray","arr","Array","isArray","l","next","done","minLen","_arrayLikeToArray","slice","name","from","test","len","arr2","IntersectionDetector","prevMetadata","startMetadataPolling","setInterval","currentMetadata","hasMetadataChanged","checkForIntersections","_this2","allWindowsMetadata","localStorage","getItem","entries","_ref","_ref2","metadata","isOverlapping","emitIntersectionEvent","calculateIntersection","metadata1","metadata2","position","size","width","height","x1","max","y1","min","intersectionArea","6","KeyboardEventBroadcaster","initEventListeners","addEventListener","keyboardMessage","keyCode","7","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","apply","_objectSpread","_toPropertyKey","getOwnPropertyDescriptors","defineProperties","MetadataManager","currentWindows","_this3","windowsMetadata","reduce","acc","createWindowObject","console","log","screenX","screenY","outerWidth","outerHeight","hasOwnProperty","lastUpdate","lastActive","setItem","_this4","allWindows","currentWindow","prevWindow","_this5","timeout","currentWindowsInLocalStorage","currentTime","8","MouseEventBroadcaster","eventType","shouldBroadcastEvent","mouseMessage","9","calculateEntryPosition","direction","bestWindowId","zoomScale","bestWindowMetadata","bestWindowSize","gameWidth","gameHeight","error","calculateEdgeDistance","targetWindowPosition","targetWindowSize","currentWindowPosition","currentWindowSize","edgeDistance","Infinity","entityData","screenPosition","windowLeft","windowRight","windowTop","windowBottom","diffToLeft","diffToRight","diffToTop","diffToBottom","innerWidth","innerHeight","minEdgeDistance","fallbackWindowId","minFallbackDistance","_ref3","_ref4","entryPosition","z","newEntryPosition","10","url","adjustCurrentWindow","availableScreenWidth","screen","availWidth","availableScreenHeight","availHeight","features","menubar","toolbar","location","status","scrollbars","resizable","title","toISOString","left","top","featuresStr","halfWidth","floor","halfHeight","offsetX","map","join","newWindow"],"mappings":"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"}